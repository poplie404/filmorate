# üé¨ Filmorate

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ñ–∏–ª—å–º–∞–º–∏.  
–ù–∞ —Ç–µ–∫—É—â–µ–º —ç—Ç–∞–ø–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ **–∂–∞–Ω—Ä–æ–≤**, **–≤–æ–∑—Ä–∞—Å—Ç–Ω—ã—Ö —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ (MPA)** –∏ **—Å—Ç–∞—Ç—É—Å–∞ –¥—Ä—É–∂–±—ã**.

---

## üìä –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

![–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](schema.png)

---

## üìù –ü–æ—è—Å–Ω–µ–Ω–∏—è –∫ —Å—Ö–µ–º–µ

- **users** ‚Äî —Ö—Ä–∞–Ω–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  
- **films** ‚Äî —Ö—Ä–∞–Ω–∏—Ç —Ñ–∏–ª—å–º—ã —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–µ–π—Ç–∏–Ω–≥–∞ MPA.  
- **genres** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∂–∞–Ω—Ä–æ–≤.  
- **film_genres** ‚Äî —Å–≤—è–∑—å ¬´–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º¬ª –º–µ–∂–¥—É —Ñ–∏–ª—å–º–∞–º–∏ –∏ –∂–∞–Ω—Ä–∞–º–∏.  
- **friendships** ‚Äî —Ö—Ä–∞–Ω–∏—Ç –¥—Ä—É–∑–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å—Ç–∞—Ç—É—Å (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ / –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ).  
- **film_likes** ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –ª–∞–π–∫–æ–≤ —Ñ–∏–ª—å–º–æ–≤.  

---

## üîç –ü—Ä–∏–º–µ—Ä—ã SQL-–∑–∞–ø—Ä–æ—Å–æ–≤

### 1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø-10 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤
```sql
SELECT f.id, f.name, COUNT(fl.user_id) AS likes
FROM films f
LEFT JOIN film_likes fl ON f.id = fl.film_id
GROUP BY f.id, f.name
ORDER BY likes DESC
LIMIT 10;
```
### 2. –ù–∞–π—Ç–∏ –æ–±—â–∏—Ö –¥—Ä—É–∑–µ–π –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```sql
SELECT u.id, u.login, u.name
FROM friendships f1
JOIN friendships f2 ON f1.friend_id = f2.friend_id
JOIN users u ON u.id = f1.friend_id
WHERE f1.user_id = 1 AND f2.user_id = 2
AND f1.status = 'CONFIRMED' AND f2.status = 'CONFIRMED';
```

### 3. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ñ–∏–ª—å–º—ã –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∂–∞–Ω—Ä–∞
```sql
SELECT f.id, f.name
FROM films f
JOIN film_genres fg ON f.id = fg.film_id
JOIN genres g ON fg.genre_id = g.id
WHERE g.name = '–ö–æ–º–µ–¥–∏—è';
```